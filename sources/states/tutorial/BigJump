#pragma once

struct BigJumpTutorialStep : public TutorialStep {
    void enter(LocalizeAPI* loc, SessionComponent* , TutorialEntities* entities) {
        TEXT_RENDERING(entities->text)->show = false;
        TEXT_RENDERING(entities->text)->text = loc->text("longer_press", "Do longer press to make higher jumps");
    }
    bool mustUpdateGame(SessionComponent* sc, TutorialEntities* ) {
        if (TRANSFORM(sc->currentRunner)->position.x < 0) {
            return true;
        } else {
            ANIMATION(sc->currentRunner)->playbackSpeed = 0;
            return false;
        }
    }
    bool canExit(SessionComponent* sc, TutorialEntities* entities) {
        if (TRANSFORM(sc->currentRunner)->position.x >= 0) {
            TEXT_RENDERING(entities->text)->show = true;
            ANIMATION(sc->currentRunner)->playbackSpeed = 0;
            return true;
        }
        return false;
    }
    
    void exit(SessionComponent* sc, TutorialEntities* ) {
        RUNNER(sc->currentRunner)->jumpTimes.push_back(RUNNER(sc->currentRunner)->elapsed);
        RUNNER(sc->currentRunner)->jumpDurations.push_back(RunnerSystem::MaxJumpDuration);
        ANIMATION(sc->currentRunner)->playbackSpeed = 1.1;
    }
};
